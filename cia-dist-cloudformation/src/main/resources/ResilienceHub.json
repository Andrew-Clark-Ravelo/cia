{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Resources": {
		"AppPolicy": {
			"Type": "AWS::ResilienceHub::ResiliencyPolicy",
			"Properties": {
				"DataLocationConstraint": "AnyLocation",
				"Policy": {
					"Software": {
						"RpoInSecs": 300,
						"RtoInSecs": 300
					},
					"Hardware": {
						"RpoInSecs": 300,
						"RtoInSecs": 300
					},
					"AZ": {
						"RpoInSecs": 300,
						"RtoInSecs": 300
					},
					"Region": {
						"RpoInSecs": 0,
						"RtoInSecs": 0
					}
				},
				"PolicyDescription": "MissionCriticalCloudformation",
				"PolicyName": "MissionCriticalMissionCriticalCloudformation",
				"Tier": "MissionCritical"
			}
		},
		"Application": {
			"Type": "AWS::ResilienceHub::App",
			"DependsOn": "DNSRecordCNAME2PublicElasticLoadBalancerV2",
			"Properties": {
				"AppAssessmentSchedule": "Daily",
				"AppTemplateBody": "{\"resources\":[],\"appComponents\":[{\"name\":\"appcommon\",\"type\":\"AWS::ResilienceHub::AppCommonAppComponent\",\"resourceNames\":[]}],\"excludedResources\":{\"logicalResourceIds\":[]},\"version\":2.0}",
				"Description": "Citizen Intelligence Agency",
				"Name": "CIA",
				"ResiliencyPolicyArn": {"Ref": "AppPolicy"},
				"ResourceMappings": [
					{
					  "LogicalStackName" : {"Ref": "AWS::StackName"},
					  "MappingType" : "CfnStack",
					  "PhysicalResourceId" : {
						  "Identifier" : {"Fn::Sub": "${WebServerFleet.Arn}"},
						  "Type" : "AWS::AutoScaling::AutoScalingGroup"
					   },
					  "ResourceName" : "WebServerFleet"
					},
					{
					  "LogicalStackName" : {"Ref": "AWS::StackName"},
					  "MappingType" : "CfnStack",
					  "PhysicalResourceId" : {
						  "Identifier" : {"Fn::Sub": "${Database.Arn}"},
						  "Type" : "AWS::RDS::DBInstance"
					   },
					  "ResourceName" : "Database"
					},					
					{
					  "LogicalStackName" : {"Ref": "AWS::StackName"},
					  "MappingType" : "CfnStack",
					  "PhysicalResourceId" : {
						  "Identifier" : {"Fn::Sub": "${NAT.Arn}"},
						  "Type" : "AWS::EC2::NatGateway"
					   },
					  "ResourceName" : "NAT"
					},					
					{
					  "LogicalStackName" : {"Ref": "AWS::StackName"},
					  "MappingType" : "CfnStack",
					  "PhysicalResourceId" : {
						  "Identifier" : {"Fn::Sub": "${DNSRecordCNAME2PublicElasticLoadBalancerV2.Arn}"},
						  "Type" : "AWS::Route53::RecordSet"
					   },
					  "ResourceName" : "DNS"
					},					
					{
					  "LogicalStackName" : {"Ref": "AWS::StackName"},
					  "MappingType" : "CfnStack",
					  "PhysicalResourceId" : {
						  "Identifier" : {"Fn::Sub": "${ArtifactBucket.Arn}"},
						  "Type" : "AWS::S3::Bucket"
					   },
					  "ResourceName" : "SystemInventory"
					},
					{
					  "LogicalStackName" : {"Ref": "AWS::StackName"},
					  "MappingType" : "CfnStack",
					  "PhysicalResourceId" : {
						  "Identifier" : {"Fn::Sub": "${LogsBucket.Arn}"},
						  "Type" : "AWS::S3::Bucket"
					   },
					  "ResourceName" : "WebFleetLogs"
					}
				]
			}
		}
	}
}
